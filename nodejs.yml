- name: node | install nvm
  git:
    repo:   https://github.com/creationix/nvm.git
    dest:   '/usr/local/nvm'
    update: yes

- name: node | copy nvm initialize script
  copy:
    src:   '{{ common_path }}/files/nodejs/nvm.sh'
    dest:  /etc/profile.d/nvm.sh
    owner: root
    group: root
    mode:  0755

- name: node | install node
  command: 'nvm install {{ nodejs.version }}'

- name: node | declare node version
  command: 'nvm use {{ nodejs.version }}'
